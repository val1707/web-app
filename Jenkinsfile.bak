pipeline {
 agent any
pipeline {
    agent any
    stages {
        stage ('Build') {
            steps {
                / Get some code from a GitHub repository
                git url: 'https://github.com/naiveskill/devops.git', branch: 'master'
            }
            steps {
                sh docker build -t wordpress:test46 .
            }
            steps {
                sh docker run -it -d --network=wordpress-network -e MYSQL_DATABASE=exampledb -e MYSQL_USER=exampleuser -e MYSQL_PASSWORD=examplepass -e MYSQL_RANDOM_ROOT_PASSWORD='1' -v db:/var/lib/mysql  mysql:5.7
            }
            steps {
                sh docker run -it -d -p 8082:80 --network=wordpress-network -e WORDPRESS_DB_HOST=172.18.0.2 -e  WORDPRESS_DB_USER=exampleuser -e WORDPRESS_DB_PASSWORD=examplepass -e WORDPRESS_DB_NAME=exampledb wordpress:latest10
            }
        }
    }
}

}
